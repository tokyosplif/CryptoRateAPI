<?php

namespace App\DataFixtures;

use App\Entity\ExchangeRate;
use Doctrine\Bundle\FixturesBundle\Fixture;
use Doctrine\Persistence\ObjectManager;
use DateTime;

class ExchangeRateFixtures extends Fixture
{
    /**
     * @throws \DateMalformedStringException
     */
    public function load(ObjectManager $manager): void
    {
        $data = [
            ['BTC', ['USD' => 45000.12345678, 'EUR' => 41000.87654321, 'GBP' => 35000.56781234], '2025-01-01 12:00:00'],
            ['ETH', ['USD' => 3000.65432100, 'EUR' => 2800.12345678, 'GBP' => 2500.98765432], '2025-01-02 12:00:00'],
            ['LTC', ['USD' => 150.98765432, 'EUR' => 140.56781234, 'GBP' => 130.87654321], '2025-01-03 12:00:00'],
            ['BTC', ['USD' => 45200.65432100, 'EUR' => 41200.12345678, 'GBP' => 35200.87654321], '2025-01-04 12:00:00'],
            ['ETH', ['USD' => 3050.87654321, 'EUR' => 2850.98765432, 'GBP' => 2550.54321000], '2025-01-05 12:00:00'],
            ['LTC', ['USD' => 155.23456789, 'EUR' => 145.98765432, 'GBP' => 135.87654321], '2025-01-06 12:00:00'],
            ['BTC', ['USD' => 45500.98765432, 'EUR' => 41400.98765432, 'GBP' => 35400.54321000], '2025-01-07 12:00:00'],
            ['ETH', ['USD' => 3100.12345678, 'EUR' => 2900.65432100, 'GBP' => 2600.43210987], '2025-01-08 12:00:00'],
            ['LTC', ['USD' => 160.56781234, 'EUR' => 150.43210987, 'GBP' => 140.65432100], '2025-01-09 12:00:00'],
            ['BTC', ['USD' => 46000.87654321, 'EUR' => 41800.43210987, 'GBP' => 35800.98765432], '2025-01-10 12:00:00'],
            ['ETH', ['USD' => 3150.98765432, 'EUR' => 2950.87654321, 'GBP' => 2650.32198765], '2025-01-11 12:00:00'],
            ['LTC', ['USD' => 165.98765432, 'EUR' => 155.87654321, 'GBP' => 145.54321000], '2025-01-12 12:00:00'],
            ['BTC', ['USD' => 46500.12345678, 'EUR' => 42200.12345678, 'GBP' => 36200.98765432], '2025-01-13 12:00:00'],
            ['ETH', ['USD' => 3200.54321000, 'EUR' => 3000.98765432, 'GBP' => 2700.76543210], '2025-01-14 12:00:00'],
            ['LTC', ['USD' => 170.43210987, 'EUR' => 160.76543210, 'GBP' => 150.98765432], '2025-01-15 12:00:00'],
            ['BTC', ['USD' => 47000.65432100, 'EUR' => 42600.54321000, 'GBP' => 36600.12345678], '2025-01-16 12:00:00'],
            ['ETH', ['USD' => 3250.43210987, 'EUR' => 3050.32198765, 'GBP' => 2750.43210987], '2025-01-17 12:00:00'],
            ['LTC', ['USD' => 175.98765432, 'EUR' => 165.87654321, 'GBP' => 155.43210987], '2025-01-18 12:00:00'],
            ['BTC', ['USD' => 47500.98765432, 'EUR' => 43000.98765432, 'GBP' => 37000.12345678], '2025-01-19 12:00:00'],
        ];

        foreach ($data as $item) {
            $exchangeRate = new ExchangeRate();
            $exchangeRate->setCurrencyPair($item[0]);
            $exchangeRate->setRates($item[1]);
            $exchangeRate->setTimestamp(new DateTime($item[2]));

            $manager->persist($exchangeRate);
        }
        $manager->flush();
    }
}
